---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "coder_agent Resource - terraform-provider-coder"
subcategory: ""
description: |-
  Use this resource to associate an agent.
---

# coder_agent (Resource)

Use this resource to associate an agent.

## Example Usage

```terraform
data "coder_agent_script" "dev" {
  os   = "linux"
  arch = "amd64"
}

resource "coder_agent" "dev" {
  startup_script = "code-server"
}

resource "google_compute_instance" "dev" {
  spec {
    container {
      command = ["sh", "-c", data.coder_agent_script.dev.value]
      env {
        name  = "CODER_TOKEN"
        value = coder_agent.dev.token
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- **auth** (Block List, Max: 1) Authenticate an instance with zero-trust by using cloud metadata APIs. (see [below for nested schema](#nestedblock--auth))
- **env** (Map of String) A mapping of environment variables to set inside the workspace.
- **id** (String) The ID of this resource.
- **startup_script** (String) A script to run after the agent starts.

### Read-Only

- **token** (String) Set the environment variable "CODER_TOKEN" with this token to authenticate an agent.

<a id="nestedblock--auth"></a>
### Nested Schema for `auth`

Optional:

- **instance_id** (String) A unique ID from the created compute resource to identify with cloud metadata APIs.
- **type** (String) The authentication type to use. Must be one of: "google-instance-identity".


